# μ»¤ν”Ό μ£Όλ¬Έ μ•± - λ°±μ—”λ“ μ„λ²„

Express.jsμ™€ PostgreSQLμ„ μ‚¬μ©ν• μ»¤ν”Ό μ£Όλ¬Έ μ•±μ λ°±μ—”λ“ API μ„λ²„μ…λ‹λ‹¤.

## π“‹ λ©μ°¨

- [κΈ°μ  μ¤νƒ](#κΈ°μ -μ¤νƒ)
- [ν”„λ΅μ νΈ κµ¬μ΅°](#ν”„λ΅μ νΈ-κµ¬μ΅°)
- [μ‹μ‘ν•κΈ°](#μ‹μ‘ν•κΈ°)
- [API μ—”λ“ν¬μΈνΈ](#api-μ—”λ“ν¬μΈνΈ)
- [ν™κ²½ λ³€μ](#ν™κ²½-λ³€μ)

## π›  κΈ°μ  μ¤νƒ

- **Runtime**: Node.js
- **Framework**: Express.js
- **Database**: PostgreSQL
- **Dependencies**:
  - `express` - μ›Ή ν”„λ μ„μ›ν¬
  - `pg` - PostgreSQL ν΄λΌμ΄μ–ΈνΈ
  - `cors` - CORS λ―Έλ“¤μ›¨μ–΄
  - `dotenv` - ν™κ²½ λ³€μ κ΄€λ¦¬
  - `morgan` - HTTP μ”μ²­ λ΅κΉ…
  - `nodemon` - κ°λ° μ„λ²„ μλ™ μ¬μ‹μ‘

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
server/
β”β”€β”€ src/
β”‚   β”β”€β”€ config/          # μ„¤μ • νμΌ
β”‚   β”‚   β”β”€β”€ database.js       # λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°
β”‚   β”‚   β””β”€β”€ initDatabase.js   # DB μ΄κΈ°ν™” μ¤ν¬λ¦½νΈ
β”‚   β”β”€β”€ routes/          # API λΌμ°νΈ
β”‚   β”‚   β”β”€β”€ index.js          # λΌμ°νΈ μΈλ±μ¤
β”‚   β”‚   β”β”€β”€ menuRoutes.js     # λ©”λ‰΄ κ΄€λ ¨ λΌμ°νΈ
β”‚   β”‚   β””β”€β”€ orderRoutes.js    # μ£Όλ¬Έ κ΄€λ ¨ λΌμ°νΈ
β”‚   β”β”€β”€ controllers/     # λΉ„μ¦λ‹μ¤ λ΅μ§ (μ¶”ν›„ κµ¬ν„)
β”‚   β”β”€β”€ models/          # λ°μ΄ν„° λ¨λΈ (μ¶”ν›„ κµ¬ν„)
β”‚   β”β”€β”€ middleware/      # λ―Έλ“¤μ›¨μ–΄
β”‚   β”‚   β””β”€β”€ errorHandler.js   # μ—λ¬ ν•Έλ“¤λ§
β”‚   β”β”€β”€ utils/           # μ ν‹Έλ¦¬ν‹° ν•¨μ
β”‚   β””β”€β”€ server.js        # μ„λ²„ μ§„μ…μ 
β”β”€β”€ .env                 # ν™κ²½ λ³€μ μ„¤μ •
β”β”€β”€ .gitignore
β”β”€β”€ package.json
β””β”€β”€ README.md
```

## π€ μ‹μ‘ν•κΈ°

### 1. μμ΅΄μ„± μ„¤μΉ

```bash
cd server
npm install
```

### 2. ν™κ²½ λ³€μ μ„¤μ •

`.env` νμΌμ΄ μ΄λ―Έ μƒμ„±λμ–΄ μμµλ‹λ‹¤. ν•„μ”ν• κ²½μ° κ°’μ„ μμ •ν•μ„Έμ”.

`.env` νμΌ μμ‹:
```env
PORT=5000
NODE_ENV=development

DB_HOST=localhost
DB_PORT=5432
DB_NAME=coffee_order_db
DB_USER=postgres
DB_PASSWORD=your_password

CORS_ORIGIN=http://localhost:3000
```

### 3. PostgreSQL λ°μ΄ν„°λ² μ΄μ¤ μ¤€λΉ„

PostgreSQLμ΄ μ„¤μΉλμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤. λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤:

```bash
# PostgreSQLμ— μ ‘μ†
psql -U postgres

# λ°μ΄ν„°λ² μ΄μ¤ μƒμ„±
CREATE DATABASE coffee_order_db;

# μΆ…λ£
\q
```

### 4. λ°μ΄ν„°λ² μ΄μ¤ μ΄κΈ°ν™”

ν…μ΄λΈ” μƒμ„± λ° μƒν” λ°μ΄ν„° μ‚½μ…:

```bash
npm run init-db
```

### 5. μ„λ²„ μ‹¤ν–‰

**κ°λ° λ¨λ“** (nodemon μ‚¬μ©):
```bash
npm run dev
```

**ν”„λ΅λ•μ… λ¨λ“**:
```bash
npm start
```

μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹μ‘λλ©΄ `http://localhost:5000`μ—μ„ μ ‘κ·Όν•  μ μμµλ‹λ‹¤.

## π“΅ API μ—”λ“ν¬μΈνΈ

### ν—¬μ¤ μ²΄ν¬
- `GET /api/health` - μ„λ²„ μƒνƒ ν™•μΈ

### λ©”λ‰΄ κ΄€λ ¨
- `GET /api/menus` - λ©”λ‰΄ λ©λ΅ μ΅°ν
- `GET /api/menus/:menuId` - λ©”λ‰΄ μƒμ„Έ μ΅°ν
- `GET /api/menus/:menuId/options` - λ©”λ‰΄ μµμ… μ΅°ν
- `PATCH /api/menus/:menuId` - λ©”λ‰΄ μ¬κ³  μμ • (κ΄€λ¦¬μ)

### μ£Όλ¬Έ κ΄€λ ¨
- `POST /api/orders` - μ£Όλ¬Έ μƒμ„±
- `GET /api/orders` - μ£Όλ¬Έ λ©λ΅ μ΅°ν (κ΄€λ¦¬μ)
- `GET /api/orders/:orderId` - μ£Όλ¬Έ μƒμ„Έ μ΅°ν
- `PATCH /api/orders/:orderId` - μ£Όλ¬Έ μƒνƒ λ³€κ²½ (κ΄€λ¦¬μ)

μμ„Έν• API λ…μ„Έλ” [PRD λ¬Έμ„](../docs/PRD.md)λ¥Ό μ°Έκ³ ν•μ„Έμ”.

## π”§ ν™κ²½ λ³€μ

| λ³€μλ… | μ„¤λ… | κΈ°λ³Έκ°’ |
|--------|------|--------|
| `PORT` | μ„λ²„ ν¬νΈ | `5000` |
| `NODE_ENV` | μ‹¤ν–‰ ν™κ²½ | `development` |
| `DB_HOST` | λ°μ΄ν„°λ² μ΄μ¤ νΈμ¤νΈ | `localhost` |
| `DB_PORT` | λ°μ΄ν„°λ² μ΄μ¤ ν¬νΈ | `5432` |
| `DB_NAME` | λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„ | `coffee_order_db` |
| `DB_USER` | λ°μ΄ν„°λ² μ΄μ¤ μ‚¬μ©μ | `postgres` |
| `DB_PASSWORD` | λ°μ΄ν„°λ² μ΄μ¤ λΉ„λ°€λ²νΈ | - |
| `CORS_ORIGIN` | CORS ν—μ© λ„λ©”μΈ | `http://localhost:3000` |

## π“ κ°λ° κ°€μ΄λ“

### μ»¨νΈλ΅¤λ¬ μ¶”κ°€ μμ •
ν„μ¬ λΌμ°νΈλ” ν”λ μ΄μ¤ν™€λ”λ΅ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤. λ‹¤μ λ‹¨κ³„μ—μ„ μ»¨νΈλ΅¤λ¬λ¥Ό κµ¬ν„ν•μ—¬ μ‹¤μ  λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μ¶”κ°€ν•  μμ •μ…λ‹λ‹¤.

### λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§
- **menus**: λ©”λ‰΄ μ •λ³΄
- **options**: λ©”λ‰΄ μµμ… (μ‚¬μ΄μ¦, μ¨λ„)
- **orders**: μ£Όλ¬Έ μ •λ³΄

μμ„Έν• μ¤ν‚¤λ§λ” `src/config/initDatabase.js`λ¥Ό μ°Έκ³ ν•μ„Έμ”.

## π› λ¬Έμ  ν•΄κ²°

### λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μ¤λ¥
- PostgreSQLμ΄ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
- `.env` νμΌμ λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ • ν™•μΈ
- λ°μ΄ν„°λ² μ΄μ¤κ°€ μƒμ„±λμ—λ”μ§€ ν™•μΈ

### ν¬νΈ μ¶©λ
- `.env` νμΌμ—μ„ `PORT` κ°’μ„ λ³€κ²½

## π“„ λΌμ΄μ„ μ¤

ISC
